// ==========================================================================
// Sidebar Styles
// ==========================================================================

@use '../../styles/variables' as *;
@use '../../styles/mixins' as *;

.sidebar {
    display: none;
    background-color: $color-bg-white;

    @media (min-width: $breakpoint-custom-sidebar) {
        display: block;
    }
}

.sidebar__container {
    display: flex;
    height: 100%;
    max-height: 100vh;
    flex-direction: column;
    gap: $spacing-2;
}

.sidebar__logo-container {
    display: flex;
    height: 3.5rem; // 56px / 16
    align-items: center;
    padding: 0 $spacing-4;
    box-shadow: $shadow-dash-header;

    @include lg {
        padding: 0 $spacing-8;
    }
}

.sidebar__logo-link {
    display: flex;
    align-items: center;
    gap: $spacing-2;
    font-weight: $font-weight-semibold;
}

.sidebar__nav-container {
    height: 100%;
    flex: 1;
    overflow-y: auto;
}

// Organization Switcher
.sidebar__org-switcher {
    margin-top: $spacing-7;
    margin-bottom: $spacing-10;
    width: 100%;
    background-color: transparent; // Ensure transparent background
    border: none;
    border-radius: 0; // User requested 0 border radius
    padding-left: $spacing-7;
    font-size: $font-size-base;
    color: $color-secondary;
    box-shadow: none;
    transition: all 0.2s ease-in-out;

    &:hover {
        background-color: rgba($color-primary, 0.1); // Match sidebar item hover
    }

    &:focus,
    &:focus-visible,
    &[data-state="open"] {
        background-color: transparent;
        box-shadow: none !important;
        outline: none !important;
        border: none !important;
    }
}

.sidebar__org-trigger-content {
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: $spacing-2-5;
}

.sidebar__org-label {
    font-size: $font-size-sm;
    color: $color-secondary;
}

.sidebar__org-item {
    &:focus {
        background-color: rgba($color-secondary, 0.1);
    }
}

// Navigation
.sidebar__nav {
    display: grid;
    align-items: flex-start;
    font-size: $font-size-sm;
    font-weight: $font-weight-normal;
}

.sidebar__nav-link {
    display: flex;
    align-items: center;
    gap: $spacing-2-5;
    padding: $spacing-2-5 $spacing-7;
    font-size: $font-size-base;
    color: $color-secondary;
    transition: all 0.2s ease-in-out;

    &:hover {
        background-color: rgba($color-primary, 0.1);
    }

    &--active {
        border-left: 3px solid $color-primary;
        background-color: rgba($color-primary, 0.1);
    }
}

.sidebar__nav-text {
    &--inactive {
        opacity: 0.4;
    }
}

// Section Headers
.sidebar__section-header {
    margin-top: $spacing-5;
    padding: $spacing-2-5 0 $spacing-2-5 $spacing-7;
    font-size: $font-size-xs;
    font-weight: $font-weight-medium;
    color: #545F7D; // Using specific color from original
}

.sidebar__section-list {
    display: flex;
    flex-direction: column;
    gap: $spacing-1;
}

// Footer/Logout
.sidebar__footer {
    margin-top: $spacing-10;
    width: 100%;
    border-top: 1px solid rgba($color-secondary, 0.4);
}

.sidebar__logout-btn {
    display: flex;
    height: auto;
    width: 100%;
    align-items: center;
    justify-content: flex-start;
    gap: $spacing-2-5;
    border-radius: 0;
    background-color: transparent;
    padding: $spacing-2-5 $spacing-7;
    font-size: $font-size-base;
    color: $color-secondary;
    box-shadow: none;
    margin-top: $spacing-3;
    margin-bottom: $spacing-5;
    transition: all 0.2s;

    &:hover {
        border-left: 3px solid $color-primary;
        background-color: rgba($color-primary, 0.1);
    }
}

.sidebar__logout-text {
    opacity: 0.6;

    .sidebar__logout-btn:hover & {
        opacity: 1;
    }
}

.sidebar__version {
    margin-bottom: $spacing-3;
    padding-left: $spacing-7;
    font-size: $font-size-xs;
    color: $color-secondary;
}

// Organization Dropdown (Portal)
.sidebar__org-dropdown {
    background-color: $color-bg-white;
    border: 1px solid rgba($color-secondary, 0.1);
    box-shadow: $shadow-default;
    border-radius: $border-radius-md;
    z-index: $z-index-dropdown;
    min-width: 200px;
    padding: $spacing-1;

    // Override default item styles if necessary
    .select__item {
        color: $color-secondary;
        font-size: $font-size-sm;
        cursor: pointer;
        border-radius: $border-radius-sm;

        &:hover,
        &[data-highlighted] {
            background-color: rgba($color-secondary, 0.05);
            outline: none;
        }

        &[data-state="checked"] {
            background-color: rgba($color-primary, 0.1);
        }
    }
}

// Mobile Sidebar Sheet Styles
.mobile-sidebar-sheet {
    display: flex;
    flex-direction: column;
    padding: 0;
    background-color: $color-bg-white !important; // Force white background
    overflow-y: auto;
    @include custom-scrollbar;

    // Ensure the close button is visible (shadcn sheet close usually is absolute top right)
    // button[class*="absolute"] { }
}
